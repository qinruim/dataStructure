<p>ç»™ä½ ä¸€ä»½èˆªçº¿åˆ—è¡¨ <code>tickets</code> ï¼Œå…¶ä¸­ <code>tickets[i] = [from<sub>i</sub>, to<sub>i</sub>]</code> è¡¨ç¤ºé£æœºå‡ºå‘å’Œé™è½çš„æœºåœºåœ°ç‚¹ã€‚è¯·ä½ å¯¹è¯¥è¡Œç¨‹è¿›è¡Œé‡æ–°è§„åˆ’æ’åºã€‚</p>

<p>æ‰€æœ‰è¿™äº›æœºç¥¨éƒ½å±äºä¸€ä¸ªä» <code>JFK</code>ï¼ˆè‚¯å°¼è¿ªå›½é™…æœºåœºï¼‰å‡ºå‘çš„å…ˆç”Ÿï¼Œæ‰€ä»¥è¯¥è¡Œç¨‹å¿…é¡»ä» <code>JFK</code> å¼€å§‹ã€‚å¦‚æœå­˜åœ¨å¤šç§æœ‰æ•ˆçš„è¡Œç¨‹ï¼Œè¯·ä½ æŒ‰å­—å…¸æ’åºè¿”å›æœ€å°çš„è¡Œç¨‹ç»„åˆã€‚</p>

<ul> 
 <li>ä¾‹å¦‚ï¼Œè¡Œç¨‹ <code>["JFK", "LGA"]</code> ä¸ <code>["JFK", "LGB"]</code> ç›¸æ¯”å°±æ›´å°ï¼Œæ’åºæ›´é å‰ã€‚</li> 
</ul>

<p>å‡å®šæ‰€æœ‰æœºç¥¨è‡³å°‘å­˜åœ¨ä¸€ç§åˆç†çš„è¡Œç¨‹ã€‚ä¸”æ‰€æœ‰çš„æœºç¥¨ å¿…é¡»éƒ½ç”¨ä¸€æ¬¡ ä¸” åªèƒ½ç”¨ä¸€æ¬¡ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p> 
<img alt="" src="https://assets.leetcode.com/uploads/2021/03/14/itinerary1-graph.jpg" style="width: 382px; height: 222px;" /> 
<pre>
<strong>è¾“å…¥ï¼š</strong>tickets = [["MUC","LHR"],["JFK","MUC"],["SFO","SJC"],["LHR","SFO"]]
<strong>è¾“å‡ºï¼š</strong>["JFK","MUC","LHR","SFO","SJC"]
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p> 
<img alt="" src="https://assets.leetcode.com/uploads/2021/03/14/itinerary2-graph.jpg" style="width: 222px; height: 230px;" /> 
<pre>
<strong>è¾“å…¥ï¼š</strong>tickets = [["JFK","SFO"],["JFK","ATL"],["SFO","ATL"],["ATL","JFK"],["ATL","SFO"]]
<strong>è¾“å‡ºï¼š</strong>["JFK","ATL","JFK","SFO","ATL","SFO"]
<strong>è§£é‡Šï¼š</strong>å¦ä¸€ç§æœ‰æ•ˆçš„è¡Œç¨‹æ˜¯ ["JFK","SFO","ATL","JFK","ATL","SFO"] ï¼Œä½†æ˜¯å®ƒå­—å…¸æ’åºæ›´å¤§æ›´é åã€‚
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul> 
 <li><code>1 &lt;= tickets.length &lt;= 300</code></li> 
 <li><code>tickets[i].length == 2</code></li> 
 <li><code>from<sub>i</sub>.length == 3</code></li> 
 <li><code>to<sub>i</sub>.length == 3</code></li> 
 <li><code>from<sub>i</sub></code> å’Œ <code>to<sub>i</sub></code> ç”±å¤§å†™è‹±æ–‡å­—æ¯ç»„æˆ</li> 
 <li><code>from<sub>i</sub> != to<sub>i</sub></code></li> 
</ul>

<details><summary><strong>Related Topics</strong></summary>æ·±åº¦ä¼˜å…ˆæœç´¢ | å›¾ | æ¬§æ‹‰å›è·¯</details><br>

<div>ğŸ‘ 819, ğŸ‘ 0<span style='float: right;'><span style='color: gray;'><a href='https://github.com/labuladong/fucking-algorithm/discussions/939' target='_blank' style='color: lightgray;text-decoration: underline;'>bug åé¦ˆ</a> | <a href='https://labuladong.gitee.io/article/fname.html?fname=jbæ’ä»¶ç®€ä»‹' target='_blank' style='color: lightgray;text-decoration: underline;'>ä½¿ç”¨æŒ‡å—</a> | <a href='https://labuladong.github.io/algo/images/others/%E5%85%A8%E5%AE%B6%E6%A1%B6.jpg' target='_blank' style='color: lightgray;text-decoration: underline;'>æ›´å¤šé…å¥—æ’ä»¶</a></span></span></div>

<div id="labuladong"><hr>

**é€šçŸ¥ï¼š[æ•°æ®ç»“æ„ç²¾å“è¯¾](https://aep.h5.xeknow.com/s/1XJHEO) å’Œ [é€’å½’ç®—æ³•ä¸“é¢˜è¯¾](https://aep.xet.tech/s/3YGcq3) é™æ—¶é™„èµ ç½‘ç«™ä¼šå‘˜ï¼**

<details><summary><strong>labuladong æ€è·¯</strong></summary>

## åŸºæœ¬æ€è·¯

è¿™é“é¢˜çš„éš¾åº¦æ˜¯ Hardï¼Œä½†æ˜¯è¯´åˆ°åº•å°±æ˜¯ä¸€ä¸ªæš´åŠ›ç©·ä¸¾çš„ç®—æ³•ã€‚è¿™äº›æœºåœºå°±å¥½æ¯”ä¸€å¹…å›¾ä¸­çš„èŠ‚ç‚¹ï¼Œè¿™é“é¢˜å°±æ˜¯è®©ä½ æ‰¾åˆ°ä¸€æ¡è·¯å¾„ï¼Œç»è¿‡å›¾ä¸­æ‰€æœ‰çš„è¾¹ï¼Œä¸”æ¯æ¡è¾¹éƒ½åªç»è¿‡ä¸€æ¬¡ã€‚

æ ¹æ® [ä¸œå“¥å¸¦ä½ åˆ·äºŒå‰æ ‘ï¼ˆçº²é¢†ç¯‡ï¼‰](https://appktavsiei5995.pc.xiaoe-tech.com/detail/i_63a84ecde4b030cacaff6731/1) ä¸­æ‰€è¯´çš„ï¼ŒDFS ç®—æ³•å’Œå›æº¯ç®—æ³•çš„åŒºåˆ«åœ¨äºå…³æ³¨ç‚¹åœ¨ã€Œæ ‘æã€è¿˜æ˜¯ã€ŒèŠ‚ç‚¹ã€ã€‚è¿™é“é¢˜çš„å…³æ³¨åœ¨å›¾çš„è¾¹ï¼Œä¹Ÿå°±æ˜¯ã€Œæ ‘æã€ï¼Œæ‰€ä»¥å¯ä»¥ç”¨å›æº¯ç®—æ³•ï¼Œä»æ€è·¯ä¸Šè®²ï¼Œå’Œæ’åˆ—ç»„åˆç³»åˆ—é—®é¢˜æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ã€‚æœ‰äº†è¿™ä¸ªæ€è·¯ï¼ŒæŒ‰ç…§ [å›æº¯ç®—æ³•æ¡†æ¶](https://labuladong.github.io/article/fname.html?fname=å›æº¯ç®—æ³•è¯¦è§£ä¿®è®¢ç‰ˆ) ä¸­çš„å›æº¯ç®—æ³•æ¡†æ¶å†™å‡ºä»£ç å³å¯ã€‚

å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé¢˜ç›®è¯´æˆ‘ä»¬è¦è¿”å›å­—å…¸åºæœ€å°çš„ç»“æœï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¯¹é‚»æ¥è¡¨ä¸­çš„æ¯ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œæ’åºï¼Œè¿™æ ·ä¸€æ¥ï¼Œå›æº¯ç®—æ³•ä»å·¦åˆ°å³éå†èŠ‚ç‚¹ï¼Œå°±èƒ½ä¿è¯ç¬¬ä¸€æ¬¡å¾—åˆ°çš„å¯è¡Œç»“æœæ˜¯å­—å…¸åºæœ€å°çš„ã€‚

**æ ‡ç­¾ï¼š[å›æº¯ç®—æ³•](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAxODQxMDM0Mw==&action=getalbum&album_id=2122002916411604996)ï¼Œ[å›¾è®ºç®—æ³•](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAxODQxMDM0Mw==&action=getalbum&album_id=2122000448684457990)**

## è§£æ³•ä»£ç 

æç¤ºï¼šğŸŸ¢ æ ‡è®°çš„æ˜¯æˆ‘å†™çš„è§£æ³•ä»£ç ï¼ŒğŸ¤– æ ‡è®°çš„æ˜¯ chatGPT ç¿»è¯‘çš„å¤šè¯­è¨€è§£æ³•ä»£ç ã€‚å¦‚æœ‰é”™è¯¯ï¼Œå¯ä»¥ [ç‚¹è¿™é‡Œ](https://github.com/labuladong/fucking-algorithm/issues/1113) åé¦ˆå’Œä¿®æ­£ã€‚

<div class="tab-panel"><div class="tab-nav">
<button data-tab-item="cpp" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">cppğŸ¤–</button>

<button data-tab-item="python" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">pythonğŸ¤–</button>

<button data-tab-item="java" class="tab-nav-button btn active" data-tab-group="default" onclick="switchTab(this)">javağŸŸ¢</button>

<button data-tab-item="go" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">goğŸ¤–</button>

<button data-tab-item="javascript" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">javascriptğŸ¤–</button>
</div><div class="tab-content">
<div data-tab-item="cpp" class="tab-item " data-tab-group="default"><div class="highlight">

```cpp
// æ³¨æ„ï¼šcpp ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
// æœ¬ä»£ç è¿˜æœªç»è¿‡åŠ›æ‰£æµ‹è¯•ï¼Œä»…ä¾›å‚è€ƒï¼Œå¦‚æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚ç…§æˆ‘å†™çš„ java ä»£ç å¯¹æ¯”æŸ¥çœ‹ã€‚

class Solution {
    // é‚»æ¥è¡¨å½¢å¼çš„å›¾ï¼Œkey æ˜¯æœºåœºåå­—ï¼Œvalue æ˜¯ä»è¯¥æœºåœºå‡ºå‘èƒ½å¤Ÿåˆ°è¾¾çš„æœºåœºåˆ—è¡¨
    unordered_map<string, vector<string>> graph;
    // å’Œ graph å¯¹åº”ï¼Œè®°å½•æ¯å¼ æœºç¥¨æ˜¯å¦è¢«ä½¿ç”¨è¿‡
    // æ¯”å¦‚ graph["JFK"][2] = true è¯´æ˜ä»æœºåœº JFK å‡ºå‘çš„ç¬¬ 3 å¼ æœºç¥¨å·²ç»ç”¨è¿‡äº†
    unordered_map<string, vector<bool>> used;
    vector<vector<string>> tickets;

    // å›æº¯ç®—æ³•ä½¿ç”¨çš„æ•°æ®ç»“æ„
    deque<string> track;
    // å›æº¯ç®—æ³•è®°å½•ç»“æœ
    vector<string> res;

public:
    vector<string> findItinerary(vector<vector<string>>& tickets) {
        this->tickets = tickets;
        // 1. ç”¨æœºåœºçš„åå­—æ„å»ºé‚»æ¥è¡¨
        for (vector<string>& ticket : tickets) {
            string from = ticket[0];
            string to = ticket[1];
            if (!graph.count(from)) {
                graph[from] = vector<string>();
            }
            graph[from].push_back(to);
        }
        // 2. å¯¹é‚»æ¥è¡¨çš„æ¯ä¸€è¡Œè¿›è¡Œæ’åºï¼Œä¿è¯å­—å…¸åºæœ€å°
        for (auto& p : graph) {
            sort(p.second.begin(), p.second.end());
        }
        // 3. åˆå§‹åŒ– used ç»“æ„ï¼Œåˆå§‹å€¼éƒ½ä¸º false
        for (auto& p : graph) {
            used[p.first] = vector<bool>(p.second.size(), false);
        }
        // 4. ä»èµ·ç‚¹ "JFK" å¼€å§‹å¯åŠ¨ DFS ç®—æ³•é€’å½’éå†
        track.push_back("JFK");
        backtrack("JFK");
        return res;
    }

private:
    void backtrack(string airport) {
        if (!res.empty()) {
            // å·²ç»æ‰¾åˆ°ç­”æ¡ˆäº†ï¼Œä¸ç”¨å†è®¡ç®—äº†
            return;
        }
        if (track.size() == tickets.size() + 1) {
            // track é‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„æœºç¥¨ï¼Œå³å¾—åˆ°äº†ä¸€ä¸ªåˆæ³•çš„ç»“æœ
            // æ³¨æ„ tickets.size() è¦åŠ ä¸€ï¼Œå› ä¸º track é‡Œé¢é¢å¤–åŒ…å«äº†èµ·ç‚¹ "JFK"
            res = vector<string>(track.begin(), track.end());
            return;
        }
        if (!graph.count(airport)) {
            // æ²¡æœ‰ä» s å‡ºå‘çš„è¾¹
            return;
        }

        // éå†å½“å‰æœºåœºæ‰€æœ‰èƒ½å¤Ÿåˆ°è¾¾çš„æœºåœº
        vector<string>& nextAirports = graph[airport];
        for (int i = 0; i < nextAirports.size(); i++) {
            string& nextAirport = nextAirports[i];
            if (used[airport][i]) {
                // å¦‚æœè¿™å¼ æœºç¥¨è¢«ä½¿ç”¨è¿‡ï¼Œè·³è¿‡
                continue;
            }
            // åšé€‰æ‹©
            used[airport][i] = true;
            track.push_back(nextAirport);
            // é€’å½’
            backtrack(nextAirport);
            // æ’¤é”€é€‰æ‹©
            used[airport][i] = false;
            track.pop_back();
        }
    }
};
```

</div></div>

<div data-tab-item="python" class="tab-item " data-tab-group="default"><div class="highlight">

```python
# æ³¨æ„ï¼špython ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
# æœ¬ä»£ç è¿˜æœªç»è¿‡åŠ›æ‰£æµ‹è¯•ï¼Œä»…ä¾›å‚è€ƒï¼Œå¦‚æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚ç…§æˆ‘å†™çš„ java ä»£ç å¯¹æ¯”æŸ¥çœ‹ã€‚

class Solution:
    def __init__(self):
        # é‚»æ¥è¡¨å½¢å¼çš„å›¾ï¼Œkey æ˜¯æœºåœºåå­—ï¼Œvalue æ˜¯ä»è¯¥æœºåœºå‡ºå‘èƒ½å¤Ÿåˆ°è¾¾çš„æœºåœºåˆ—è¡¨
        self.graph = {}
        # å’Œ graph å¯¹åº”ï¼Œè®°å½•æ¯å¼ æœºç¥¨æ˜¯å¦è¢«ä½¿ç”¨è¿‡
        # æ¯”å¦‚ graph["JFK"][2] = True è¯´æ˜ä»æœºåœº JFK å‡ºå‘çš„ç¬¬ 3 å¼ æœºç¥¨å·²ç»ç”¨è¿‡äº†
        self.used = {}
        self.tickets = None

        # å›æº¯ç®—æ³•ä½¿ç”¨çš„æ•°æ®ç»“æ„
        self.track = []
        # å›æº¯ç®—æ³•è®°å½•ç»“æœ
        self.res = []

    def findItinerary(self, tickets: List[List[str]]) -> List[str]:
        self.tickets = tickets
        # 1. ç”¨æœºåœºçš„åå­—æ„å»ºé‚»æ¥è¡¨
        for ticket in tickets:
            from_city, to_city = ticket
            if from_city not in self.graph:
                self.graph[from_city] = []
            self.graph[from_city].append(to_city)
        # 2. å¯¹é‚»æ¥è¡¨çš„æ¯ä¸€è¡Œè¿›è¡Œæ’åºï¼Œä¿è¯å­—å…¸åºæœ€å°
        for city in self.graph:
            self.graph[city].sort()
        # 3. åˆå§‹åŒ– used ç»“æ„ï¼Œåˆå§‹å€¼éƒ½ä¸º False
        for city in self.graph:
            size = len(self.graph[city])
            self.used[city] = [False] * size
        # 4. ä»èµ·ç‚¹ "JFK" å¼€å§‹å¯åŠ¨ DFS ç®—æ³•é€’å½’éå†
        self.track.append("JFK")
        self.backtrack("JFK")
        return self.res

    def backtrack(self, airport: str) -> None:
        if self.res:
            # å·²ç»æ‰¾åˆ°ç­”æ¡ˆäº†ï¼Œä¸ç”¨å†è®¡ç®—äº†
            return
        if len(self.track) == len(self.tickets) + 1:
            # track é‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„æœºç¥¨ï¼Œå³å¾—åˆ°äº†ä¸€ä¸ªåˆæ³•çš„ç»“æœ
            # æ³¨æ„ tickets.size() è¦åŠ ä¸€ï¼Œå› ä¸º track é‡Œé¢é¢å¤–åŒ…å«äº†èµ·ç‚¹ "JFK"
            self.res = self.track[:]
            return
        if airport not in self.graph:
            # æ²¡æœ‰ä» s å‡ºå‘çš„è¾¹
            return

        # éå†å½“å‰æœºåœºæ‰€æœ‰èƒ½å¤Ÿåˆ°è¾¾çš„æœºåœº
        next_airports = self.graph[airport]
        for next_index, next_airport in enumerate(next_airports):
            if self.used[airport][next_index]:
                # å¦‚æœè¿™å¼ æœºç¥¨è¢«ä½¿ç”¨è¿‡ï¼Œè·³è¿‡
                continue
            # åšé€‰æ‹©
            self.used[airport][next_index] = True
            self.track.append(next_airport)
            # é€’å½’
            self.backtrack(next_airport)
            # æ’¤é”€é€‰æ‹©
            self.used[airport][next_index] = False
            self.track.pop()
```

</div></div>

<div data-tab-item="java" class="tab-item active" data-tab-group="default"><div class="highlight">

```java
class Solution {
    // é‚»æ¥è¡¨å½¢å¼çš„å›¾ï¼Œkey æ˜¯æœºåœºåå­—ï¼Œvalue æ˜¯ä»è¯¥æœºåœºå‡ºå‘èƒ½å¤Ÿåˆ°è¾¾çš„æœºåœºåˆ—è¡¨
    Map<String, List<String>> graph = new HashMap<>();
    // å’Œ graph å¯¹åº”ï¼Œè®°å½•æ¯å¼ æœºç¥¨æ˜¯å¦è¢«ä½¿ç”¨è¿‡
    // æ¯”å¦‚ graph["JFK"][2] = true è¯´æ˜ä»æœºåœº JFK å‡ºå‘çš„ç¬¬ 3 å¼ æœºç¥¨å·²ç»ç”¨è¿‡äº†
    Map<String, boolean[]> used = new HashMap<>();
    List<List<String>> tickets;

    // å›æº¯ç®—æ³•ä½¿ç”¨çš„æ•°æ®ç»“æ„
    LinkedList<String> track = new LinkedList<>();
    // å›æº¯ç®—æ³•è®°å½•ç»“æœ
    List<String> res = null;

    public List<String> findItinerary(List<List<String>> tickets) {
        this.tickets = tickets;
        // 1. ç”¨æœºåœºçš„åå­—æ„å»ºé‚»æ¥è¡¨
        for (List<String> ticket : tickets) {
            String from = ticket.get(0);
            String to = ticket.get(1);
            if (!graph.containsKey(from)) {
                graph.put(from, new ArrayList<>());
            }
            graph.get(from).add(to);
        }
        // 2. å¯¹é‚»æ¥è¡¨çš„æ¯ä¸€è¡Œè¿›è¡Œæ’åºï¼Œä¿è¯å­—å…¸åºæœ€å°
        for (List<String> list : graph.values()) {
            Collections.sort(list);
        }
        // 3. åˆå§‹åŒ– used ç»“æ„ï¼Œåˆå§‹å€¼éƒ½ä¸º false
        for (String key : graph.keySet()) {
            int size = graph.get(key).size();
            used.put(key, new boolean[size]);
        }
        // 4. ä»èµ·ç‚¹ "JFK" å¼€å§‹å¯åŠ¨ DFS ç®—æ³•é€’å½’éå†
        track.add("JFK");
        backtrack("JFK");
        return res;
    }

    void backtrack(String airport) {
        if (res != null) {
            // å·²ç»æ‰¾åˆ°ç­”æ¡ˆäº†ï¼Œä¸ç”¨å†è®¡ç®—äº†
            return;
        }
        if (track.size() == tickets.size() + 1) {
            // track é‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„æœºç¥¨ï¼Œå³å¾—åˆ°äº†ä¸€ä¸ªåˆæ³•çš„ç»“æœ
            // æ³¨æ„ tickets.size() è¦åŠ ä¸€ï¼Œå› ä¸º track é‡Œé¢é¢å¤–åŒ…å«äº†èµ·ç‚¹ "JFK"
            res = new LinkedList<>(track);
            return;
        }
        if (!graph.containsKey(airport)) {
            // æ²¡æœ‰ä» s å‡ºå‘çš„è¾¹
            return;
        }

        // éå†å½“å‰æœºåœºæ‰€æœ‰èƒ½å¤Ÿåˆ°è¾¾çš„æœºåœº
        List<String> nextAirports = graph.get(airport);
        for (int nextIndex = 0; nextIndex < nextAirports.size(); nextIndex++) {
            String nextAirport = nextAirports.get(nextIndex);
            if (used.get(airport)[nextIndex]) {
                // å¦‚æœè¿™å¼ æœºç¥¨è¢«ä½¿ç”¨è¿‡ï¼Œè·³è¿‡
                continue;
            }
            // åšé€‰æ‹©
            used.get(airport)[nextIndex] = true;
            track.add(nextAirport);
            // é€’å½’
            backtrack(nextAirport);
            // æ’¤é”€é€‰æ‹©
            used.get(airport)[nextIndex] = false;
            track.removeLast();
        }
    }
}
```

</div></div>

<div data-tab-item="go" class="tab-item " data-tab-group="default"><div class="highlight">

```go
// æ³¨æ„ï¼šgo ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
// æœ¬ä»£ç è¿˜æœªç»è¿‡åŠ›æ‰£æµ‹è¯•ï¼Œä»…ä¾›å‚è€ƒï¼Œå¦‚æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚ç…§æˆ‘å†™çš„ java ä»£ç å¯¹æ¯”æŸ¥çœ‹ã€‚

func findItinerary(tickets [][]string) []string {
    // é‚»æ¥è¡¨å½¢å¼çš„å›¾ï¼Œkey æ˜¯æœºåœºåå­—ï¼Œvalue æ˜¯ä»è¯¥æœºåœºå‡ºå‘èƒ½å¤Ÿåˆ°è¾¾çš„æœºåœºåˆ—è¡¨
    graph := make(map[string][]string)
    // å’Œ graph å¯¹åº”ï¼Œè®°å½•æ¯å¼ æœºç¥¨æ˜¯å¦è¢«ä½¿ç”¨è¿‡
    // æ¯”å¦‚ graph["JFK"][2] = true è¯´æ˜ä»æœºåœº JFK å‡ºå‘çš„ç¬¬ 3 å¼ æœºç¥¨å·²ç»ç”¨è¿‡äº†
    used := make(map[string][]bool)
    var res []string

    // å›æº¯ç®—æ³•ä½¿ç”¨çš„æ•°æ®ç»“æ„
    track := make([]string, 0)
    // å›æº¯ç®—æ³•è®°å½•ç»“æœ
    res = nil

    // 1. ç”¨æœºåœºçš„åå­—æ„å»ºé‚»æ¥è¡¨
    for _, ticket := range tickets {
        from, to := ticket[0], ticket[1]
        if _, ok := graph[from]; !ok {
            graph[from] = []string{}
        }
        graph[from] = append(graph[from], to)
    }
    // 2. å¯¹é‚»æ¥è¡¨çš„æ¯ä¸€è¡Œè¿›è¡Œæ’åºï¼Œä¿è¯å­—å…¸åºæœ€å°
    for key, value := range graph {
        sort.Strings(value)
        graph[key] = value
    }
    // 3. åˆå§‹åŒ– used ç»“æ„ï¼Œåˆå§‹å€¼éƒ½ä¸º false
    for key, value := range graph {
        size := len(value)
        used[key] = make([]bool, size)
    }
    // 4. ä»èµ·ç‚¹ "JFK" å¼€å§‹å¯åŠ¨ DFS ç®—æ³•é€’å½’éå†
    track = append(track, "JFK")
    backtrack("JFK")
    return res

    func backtrack(airport string) {
        if res != nil {
            // å·²ç»æ‰¾åˆ°ç­”æ¡ˆäº†ï¼Œä¸ç”¨å†è®¡ç®—äº†
            return
        }
        if len(track) == len(tickets) + 1 {
            // track é‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„æœºç¥¨ï¼Œå³å¾—åˆ°äº†ä¸€ä¸ªåˆæ³•çš„ç»“æœ
            // æ³¨æ„ tickets.size() è¦åŠ ä¸€ï¼Œå› ä¸º track é‡Œé¢é¢å¤–åŒ…å«äº†èµ·ç‚¹ "JFK"
            res = make([]string, len(track))
            copy(res, track)
            return
        }
        if _, ok := graph[airport]; !ok {
            // æ²¡æœ‰ä» s å‡ºå‘çš„è¾¹
            return
        }

        // éå†å½“å‰æœºåœºæ‰€æœ‰èƒ½å¤Ÿåˆ°è¾¾çš„æœºåœº
        nextAirports := graph[airport]
        for nextIndex, nextAirport := range nextAirports {
            if used[airport][nextIndex] {
                // å¦‚æœè¿™å¼ æœºç¥¨è¢«ä½¿ç”¨è¿‡ï¼Œè·³è¿‡
                continue
            }
            // åšé€‰æ‹©
            used[airport][nextIndex] = true
            track = append(track, nextAirport)
            // é€’å½’
            backtrack(nextAirport)
            // æ’¤é”€é€‰æ‹©
            used[airport][nextIndex] = false
            track = track[:len(track)-1]
        }
    }
}
```

</div></div>

<div data-tab-item="javascript" class="tab-item " data-tab-group="default"><div class="highlight">

```javascript
// æ³¨æ„ï¼šjavascript ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
// æœ¬ä»£ç è¿˜æœªç»è¿‡åŠ›æ‰£æµ‹è¯•ï¼Œä»…ä¾›å‚è€ƒï¼Œå¦‚æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚ç…§æˆ‘å†™çš„ java ä»£ç å¯¹æ¯”æŸ¥çœ‹ã€‚

var findItinerary = function(tickets) {
    let graph = new Map();      // å‚¨å­˜å›¾ï¼Œkey ä¸ºæœºåœºåå­—ï¼Œvalue ä¸ºä»è¯¥æœºåœºå‡ºå‘èƒ½å¤Ÿåˆ°è¾¾çš„æœºåœºåˆ—è¡¨
    let used = new Map();       // è®°å½•æ¯å¼ æœºç¥¨æ˜¯å¦è¢«ä½¿ç”¨è¿‡ï¼Œkey ä¸ graph ç›¸åŒï¼Œvalue ä¸ºæ•°ç»„
    let track = new Array();    // å›æº¯ç®—æ³•ä½¿ç”¨çš„æ ˆ
    let res = null;             // å›æº¯ç®—æ³•è®°å½•ç»“æœ

    // ç”¨æœºåœºçš„åå­—æ„å»ºé‚»æ¥è¡¨
    for (let ticket of tickets) {
        let from = ticket[0];
        let to = ticket[1];
        if (!graph.has(from)) {
            graph.set(from, []);
        }
        graph.get(from).push(to);
    }

    // å¯¹é‚»æ¥è¡¨çš„æ¯ä¸€è¡Œè¿›è¡Œæ’åºï¼Œä¿è¯å­—å…¸åºæœ€å°
    for (let list of graph.values()) {
        list.sort();
    }

    // åˆå§‹åŒ– used ç»“æ„ï¼Œåˆå§‹å€¼éƒ½ä¸º false
    for (let key of graph.keys()) {
        let size = graph.get(key).length;
        used.set(key, new Array(size).fill(false));
    }

    // ä»èµ·ç‚¹ "JFK" å¼€å§‹å¯åŠ¨ DFS ç®—æ³•é€’å½’éå†
    track.push("JFK");
    backtrack("JFK");
    return res;

    function backtrack(airport) {
        if (res !== null) {
            // å·²ç»æ‰¾åˆ°ç­”æ¡ˆäº†ï¼Œä¸ç”¨å†è®¡ç®—äº†
            return;
        } else if (track.length === tickets.length + 1) {
            // track é‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„æœºç¥¨ï¼Œå³å¾—åˆ°äº†ä¸€ä¸ªåˆæ³•çš„ç»“æœ
            // æ³¨æ„ tickets.length è¦åŠ ä¸€ï¼Œå› ä¸º track é‡Œé¢é¢å¤–åŒ…å«äº†èµ·ç‚¹ "JFK"
            res = track.slice();
            return;
        } else if (!graph.has(airport)) {
            // æ²¡æœ‰ä» s å‡ºå‘çš„è¾¹
            return;
        }

        // éå†å½“å‰æœºåœºæ‰€æœ‰èƒ½å¤Ÿåˆ°è¾¾çš„æœºåœº
        let nextAirports = graph.get(airport);
        for (let nextIndex = 0; nextIndex < nextAirports.length; nextIndex++) {
            let nextAirport = nextAirports[nextIndex];
            if (used.get(airport)[nextIndex]) {
                // å¦‚æœè¿™å¼ æœºç¥¨è¢«ä½¿ç”¨è¿‡ï¼Œè·³è¿‡
                continue;
            }
            // åšé€‰æ‹©
            used.get(airport)[nextIndex] = true;
            track.push(nextAirport);
            // é€’å½’
            backtrack(nextAirport);
            // æ’¤é”€é€‰æ‹©
            used.get(airport)[nextIndex] = false;
            track.pop();
        }
    }
};
```

</div></div>
</div></div>

</details>
</div>



